{% extends "base.html" %}


{% block page_header %}
    <a href="{{ url_for('index') }}"><i class="fas fa-home"></i></a> > <a href="{{ url_for('project', project_id=project.id) }}"> Project {{project.name}}</a> > Tax statement {{taxstatement.year}}
{% endblock %}

{% block page_content %}
<hr>
<div class="card">
    <div class="card-header">
        <div class="row">
            <div class="col-11">
                <h3 class="text-center">Income</h3>
            </div>
            <div class="col-1">
{% if income %}
                <button class="btn btn-primary" data-toggle="modal" data-target="#incomeModal">Edit</button>
{% else %}
                <button class="btn btn-primary" data-toggle="modal" data-target="#incomeModal">Add</button>
{% endif %}
            </div>
        </div>
    </div>
{% if income %}
    <ul class="list-group">
        <li class="list-group-item"><text class="text-muted">Income person 1</text> € {{ income.income_1 }}</li>
        <li class="list-group-item"><text class="text-muted">Income person 2</text> € {{ income.income_2 }}</li>
    </ul>
{% endif %}
</div>

<div class="card">
    <div class="card-header">
        <div class="row">
            <div class="col-11">
                <h3 class="text-center">Charity</h3>
            </div>
            <div class="col-1">
{% if charity %}
                <button class="btn btn-primary" data-toggle="modal" data-target="#charityModal">Edit</button>
{% else %}
                <button class="btn btn-primary" data-toggle="modal" data-target="#charityModal">Add</button>
{% endif %}
            </div>
        </div>
    </div>
{% if charity %}
    <ul class="list-group">
        <li class="list-group-item"><text class="text-muted">Charity towards people in distress (7UD)</text> € {{ charity.charity_7UD }}</li>
        <li class="list-group-item"><text class="text-muted">Other charity (7UF)</text> € {{ charity.charity_7UF }}</li>
    </ul>
{% endif %}
</div>

{% import 'bootstrap/form.html' as wtf %}

<!-- Modals -->
<div class="modal" id="incomeModal" role="dialog" aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">{% if income %}Edit{% else %}Add{% endif %} income</div>
            <div class="modal-body">
                    {{ wtf.render_form(income_form, action=url_for('upsert_income', project_id=project.id, taxstatement_id=taxstatement.id)) }}
            </div>
        </div>
    </div>
</div>
<div class="modal" id="charityModal" role="dialog" aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">{% if charity %}Edit{% else %}Add{% endif %} charity</div>
            <div class="modal-body">
                    {{ wtf.render_form(charity_form, action=url_for('upsert_charity', project_id=project.id, taxstatement_id=taxstatement.id)) }}
            </div>
        </div>
    </div>
</div>
<hr>

<div class="row">
    <div class="col">
        <h5> Your taxes will be {{ tax_result }} </h5>
    </div>
</div>

{% endblock %}
